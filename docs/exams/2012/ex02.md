---
id: ex-2012-02
year: 2012
exam: final
tags:
  - concurrencia
  - monitores
---

# Ejercicio 2 — Monitor GestorPuente (3 puntos)

## Enunciado

Se requiere un monitor que controle el acceso a un puente de capacidad 1, con accesos norte y sur, y prioridad de ambulancias.

---

## Solución

??? note "Mostrar solución"
    ```java
    public class GestorPuente {

        private boolean hayCocheEnPuente = false;
        private int nCochesNorte = 0;
        private int nCochesSur  = 0;
        private boolean hayAmbulancia = false;

        public synchronized void entrarNorte() throws InterruptedException {
            nCochesNorte++;
            while (hayCocheEnPuente || hayAmbulancia || nCochesNorte < nCochesSur) wait();
            hayCocheEnPuente = true;
            nCochesNorte--;
        }

        public synchronized void entrarSur() throws InterruptedException {
            nCochesSur++;
            while (hayCocheEnPuente || hayAmbulancia || nCochesSur < nCochesNorte) wait();
            hayCocheEnPuente = true;
            nCochesSur--;
        }

        public synchronized void entrarAmbulancia() throws InterruptedException {
            hayAmbulancia = true;
            while (hayCocheEnPuente) wait();
            hayCocheEnPuente = true;
            hayAmbulancia = false;
        }

        public synchronized void salirPuente() {
            hayCocheEnPuente = false;
            notifyAll();
        }
    }
    ```
