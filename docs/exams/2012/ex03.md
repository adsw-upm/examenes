---
id: ex-2012-03
year: 2012
exam: final
tags:
  - android
  - actividades
---

# Ejercicio 3 — Aplicación Android NotaMedia (4 puntos)

## a) Completar AndroidManifest.xml (1 punto)

??? note "Mostrar solución"
    ```xml
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="es.upm.dit.adsw"
        android:versionCode="1"
        android:versionName="1.0">

        <uses-sdk android:minSdkVersion="10" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name">

            <activity
                android:name=".NotaMediaActivity"
                android:label="@string/app_name">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN"/>
                    <category android:name="android.intent.category.LAUNCHER"/>
                </intent-filter>
            </activity>

            <activity
                android:name=".ResultadoActivity"
                android:label="@string/app_name" />
        </application>
    </manifest>
    ```

## b) Implementar NotaMediaActivity (2 puntos)

??? note "Mostrar solución"
    ```java
    public class NotaMediaActivity extends Activity {

        public static final String APROBADO = "nota";
        public static final String VALOR = "valor";

        private EditText editNotaFinal;
        private EditText editTrabajoFinal;
        private Button buttonGuardar;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.notamedia_final);
            editNotaFinal = findViewById(R.id.editText_examen_final);
            editTrabajoFinal = findViewById(R.id.editText_trabajo_final);
            buttonGuardar = findViewById(R.id.button_calcular);
            buttonGuardar.setOnClickListener(new ProcesaMedia());
        }

        private class ProcesaMedia implements View.OnClickListener {
            @Override
            public void onClick(View v) {
                try {
                    float notaFinal = Float.parseFloat(editNotaFinal.getText().toString());
                    float notaTrabajo = Float.parseFloat(editTrabajoFinal.getText().toString());

                    if (notaFinal < 0 || notaFinal > 10 || notaTrabajo < 0 || notaTrabajo > 10) {
                        Toast.makeText(getApplication(),
                                getString(R.string.error_numero),
                                Toast.LENGTH_LONG).show();
                        return;
                    }

                    float media = (0.6f * notaFinal) + (0.4f * notaTrabajo);
                    DecimalFormat df = new DecimalFormat("0.0");
                    String mediaString = df.format(media);

                    boolean aprobado = false;
                    String valor = "";

                    if (notaTrabajo < 4 || notaFinal < 4) {
                        aprobado = false;
                        if (notaTrabajo < 4)
                            valor += " " + getString(R.string.umbral_trabajo);
                        if (notaFinal < 4)
                            valor += " " + getString(R.string.umbral_examen);
                    } else {
                        valor = mediaString;
                        aprobado = (media >= 5);
                    }

                    Intent intent = new Intent(getApplication(), ResultadoActivity.class);
                    intent.putExtra(APROBADO, aprobado);
                    intent.putExtra(VALOR, valor);
                    startActivity(intent);

                } catch (NumberFormatException e) {
                    Toast.makeText(getApplication(),
                            getString(R.string.error_numero),
                            Toast.LENGTH_LONG).show();
                }
            }
        }
    }
    ```
