---
id: ex-2015-03
year: 2015
exam: parcial 1
tags:
 - ???
---

- (a) (1 punto) Describa dos casos posibles de error significativamente diferentes para detectar errores de la clase Paredes del alumno en el borde del tablero (concretamente en la casilla (0, 0)) y prográmelos con JUnit.

??? note "Mostar solución"
    Suponiendo que partimos de la casilla c = (0,0), dos ejemplos de casos de error podrían ser: 
    
    1) Poner una pared hacia el OESTE. La pared no se añade. 
    2) Obtener la posible pared hacia el SUR. El resultado debe ser null. 
    
    Y los casos de prueba correspondientes podrían ser:
    
    ```java
    private Terreno terreno … 
    private Paredes paredes …
    
    @Test
    public void Test001() {
       Casilla c = terreno.getCasilla(0, 0);
       int size = paredes.size();
       paredes.add(c, Direccion.OESTE);
       assertEquals(paredes.size(), size); // la pared no se ha añadido
    }
    
    @Test
    public void Test002() {
       Casilla c = terreno.getCasilla(0, 0);
       assertNull(paredes.get(c, Direccion.SUR));
    }

- (b) (1 punto) Escriba el método necesario para que un fantasma empiece moviéndose hacia el NORTE hasta que choca con una pared; cuando choca intenta moverse al ESTE hasta que choca con una pared; y así sucesivamente, rotando 90º a la derecha cada vez que choca. Si no puede desplazarse a ninguna de las casillas circundantes, deja pasar esta vez y espera al siguiente ciclo.

??? note "Mostar solución"
    Una posible implementación es:
    ```java
    public class Fantasma01 {
    ...

    public void run() {
        Direccion[] direcciones =
            {Direccion.NORTE, Direccion.ESTE, Direccion.SUR, Direccion.OESTE};
        int direccionActual = 0;

        while (vivo) {
            if (casilla != null) {
                for (int i = 0; i < 4; i++) {
                    if (!terreno.hayPared(casilla, direcciones[direccionActual])) {
                        terreno.move(this, direcciones[direccionActual]);
                        break;
                    }
                    direccionActual = (direccionActual + 1) % 4;
                }
                try {
                    Thread.sleep(DELAY);
                } catch (InterruptedException ignored) {}
            }
        }
    }
    }

