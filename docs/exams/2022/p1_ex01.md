---
id: ex-2022-01
year: 2022
exam: parcial 1
tags:
 - grafos
 - princeton
---

Un grafo multigrafo permite que haya varios arcos entre dos nodos. En una entidad bancaria se quiere modelar las transferencias ejecutadas entre los bancos durante un d!a en una clase (Banco). En esta clase, se dispone de un atributo (transferGrafo) que es un multigrafo que modela estas transferencias:
    
    - Un nodo modela un banco.
    
    - Un arco modela una transacci"n. Su peso representa la cantidad transferida.

Una transferencia (la clase Transfer) se modela mediante los identificadores del banco origen y del banco destino, la cantidad, el nombre del ordenante y el nombre del beneficiario. Adem#s, se quiere relacionar cada arco del grafo con la informaci"n de su transferencia asociada. 

![](./placeholder.jpg)

Se pide:

- (a) (1,5 puntos) Proponga un atributo de una clase adecuada para relacionar un arco con su transferencia asociada y desarrolle el m$todo ponerTransfer para mantener esta relaci"n e integrar la transferencia en el grafo. 

??? note "Mostrar solución"
    ```java
    import edu.princeton.cs.algs4.*;
    import java.util.Map;
    import java.util.HashMap;
    import java.util.List;
    import java.util.ArrayList;

    public class Banco {

        private int nBancos;
        private Map<DirectedEdge, Transfer> arcosTransfer;
        private EdgeWeightedDigraph transferGrafo;

        public Banco() {
            this.arcosTransfer = new HashMap<DirectedEdge, Transfer>();
            this.transferGrafo = new EdgeWeightedDigraph(nBancos);
        }

        /**
         * Añadir una transferencia en el grafo y en la estructura que relacione
         * una arista y su transferencia asociada
         * @param transfer Transferencia a incluir
         */
        public void ponerTransfer(Transfer transfer) {
            DirectedEdge arco = new DirectedEdge(
                transfer.getBancoOrigen(),
                transfer.getBancoDestino(),
                transfer.getCantidad()
            );
            arcosTransfer.put(arco, transfer);
            transferGrafo.addEdge(arco);
        }

        /**
         * Calcular la cantidad neta de las transferencias ejecutadas
         * durante un día entre bank1 y bank2
         * @param banco1 Identificador de un banco
         * @param banco2 Identificador de otro banco
         * @return cantidad neta durante un día entre bank1 y bank2
         */
        public Double netoTransfer(int banco1, int banco2) {
            double nBanco1 = 0;
            double nBanco2 = 0;

            if (banco1 < 0 || banco1 >= transferGrafo.V()) return null;
            if (banco2 < 0 || banco2 >= transferGrafo.V()) return null;

            // Calcular el total de dinero banco1 -> banco2
            for (DirectedEdge arco : transferGrafo.adj(banco1)) {
                if (arco.to() == banco2) {
                    nBanco1 += arco.weight();
                }
            }

            // Calcular el total de dinero banco2 -> banco1
            for (DirectedEdge arco : transferGrafo.adj(banco2)) {
                if (arco.to() == banco1) {
                    nBanco2 += arco.weight();
                }
            }

            return nBanco1 - nBanco2;
        }

        /**
         * Generar la lista de las transferencias que ha generado
         * el ordenante durante un día
         * @param ordenante Usuario que ordena la transferencia
         * @return Lista de las transferencias de un ordenante
         */
        public List<Transfer> clienteTransfer(String ordenante) {
            List<Transfer> lista = new ArrayList<Transfer>();

            for (DirectedEdge arco : transferGrafo.edges()) {
                Transfer transfer = arcosTransfer.get(arco);
                if (transfer.getOrdenante().equals(ordenante)) {
                    lista.add(transfer);
                }
            }

            return lista;
        }
    }
    ```

- (b) (2 puntos) Desarrolle el m$todo netoTransfer que retorne la cantidad de dinero neto transferido entre dos bancos en un d!a. Habr# que restar la cantidad de las transferencias entre los dos bancos.

??? note "Mostrar solución"
    Vacío

- (c) (1,5 puntos) Desarrolle el m$todo clienteTransfer que retorne la lista no ordenada de las transferencias que ha ejecutado una persona (ordenante) durante un d!a.

??? note "Mostrar solución"
    Vacío


NOTA: los grafos de U. Princeton usado en esta asignatura permiten crear multigrafos.