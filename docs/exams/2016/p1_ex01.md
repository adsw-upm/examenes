---
id: ex-2016-01
year: 2016
exam: parcial 1
tags:
 - complejidad
---

Queremos desplegar un conjunto de sensores de contaminación en Madrid. Cada sensor S está en unas coordenadas (x, y) medidas en metros en una cuadrícula centrada en la Puerta del Sol, yendo el eje X de oeste a este y el eje Y de sur a norte.

Los sensores son frágiles y pueden fallar. Pero no queremos quedarnos sin datos, así que se les facilita la capacidad de que puedan mandar sus mediciones a otro sensor, que debe estar a una distancia menor que d0 metros.

```java
public class Sensor {
    private final String id;
    private final int x, y;

    public Sensor(String id, int x, int y) {
        this.id = id;
        this.x = x;
        this.y = y;
    }

    public double distancia(Sensor b) {
        int dx = Math.abs(x - b.x);
        int dy = Math.abs(y - b.y);
        return Math.sqrt(dx * dx + dy * dy);
    }
}
```

- (a) (3,5 puntos) Dada una lista con todos los sensores, escriba un método que cargue un diccionario donde cada sensor está asociado a una lista con los sensores que están a su alcance (a menos de d0 metros). Nótese que si el sensor A está dentro del alcance de B, también está B dentro del alcance de A. Razone la complejidad de este método:
```java
public class Red {
    private Diccionario diccionario = new …

    public void cargar(List<Sensor> sensores, double d0) {…}
```

??? note "Mostrar solución"
    Solución usando un diccionario de la biblioteca de Java
    
    ```java
    public class Red {
        private Map<Sensor, List<Sensor>> diccionario = new HashMap<>();
        public void cargar(List<Sensor> sensores, double d0) {
            for (int i = 0; i < sensores.size(); i++) {
                Sensor s1 = sensores.get(i);
                List<Sensor> lista = new ArrayList<>();
                for (int j = 0; j < sensores.size(); j++) {
                    if (i == j)
                        continue;
                    Sensor s2 = sensores.get(j);
                    if (s1.distancia(s2) < d0)
                        lista.add(s2);
            }
            diccionario.put(s1, lista);
        }
    }
    ```

    Para usar un diccionario como el del ejercicio 3, hay que cambiar CV y la implementación de la misma manera:

    ```java
    class CVExamen {
        final Sensor clave;
        List<Sensor> valor;

        CVExamen(Sensor clave, List<Sensor> valor) {
            this.clave = clave;
            this.valor = valor;
        }
    }

    public interface Diccionario {
        void put(Sensor clave, List<Sensor> valor);
        List<Sensor> get(Sensor clave);
        List<Sensor> remove(Sensor clave);
        int size();
        void clear();
    }
    ```
    
    Complejidad.
    
    Siendo N el número de sensores, tenemos un bucle exterior que se hace N veces. Cada pasada por el bucle incluye:
    - bucle interior: N veces, de complejidad O(n).
    - diccionario.put(), donde lacomplejidad,  si el número de ranuras es sensiblemente superior a N es O(1), si no es O(n).
    
    El total es, por tanto O(n) + … = O(n)
    
    Y la operación total de carga N × O(n) -> O(n2)